<!DOCTYPE html>

<!-- <script>
  console.log("hello!");

  const outer = () => {
    let t = 2;

    setTimeout(() => {
      t = 4;
    }, 2000);

    return () => {
      console.log(t);
    };
  };

  const inner = outer();

  inner();

  setTimeout(() => {
    inner();
  }, 4000);

  // console.dir(inner);
</script> -->

<!-- <script>
  setTimeout(() => {
    console.log("a");
  }, 0);

  console.log("b");
</script> -->

<script>
  /*
  class Promise {
    constructor(fn) {
      this._resolveFns = [];

      this._rejectFns = [];

      const resolveFn = (data) => this._resolveFns.forEach((fn) => fn(data));
      const rejectFn = (data) => this._rejectFns.forEach((fn) => fn(data));

      fn(resolveFn, rejectFn);
    }

    then(fn) {
      this._resolveFns.push(fn);
    }

    catch(fn) {
      this._rejectFns.push(fn);
    }
  }
  */

  const doIt = (result) => {
    console.log("promise resolved");
    console.log(result);
  };

  console.log("create promise");
  const p = new Promise((resolve, reject) => {
    console.log("call settimeout");
    setTimeout(() => {
      console.log("call reject");
      reject("a");
    }, 2000);
  });

  console.log("call then");
  p.then(doIt).catch((result) => console.log("rejected: ", result));

  console.log("made it here...");
</script>
